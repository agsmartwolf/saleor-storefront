mutation CreateWebhooks($targetUrl: String, $query: String) {
  webhookCreate(
    input: {
      name: "Checkout app payment notifications"
      targetUrl: $targetUrl
      events: [
        TRANSACTION_CHARGE_REQUESTED,
        TRANSACTION_REFUND_REQUESTED,
        TRANSACTION_CANCELATION_REQUESTED
      ]
      isActive: true
      query: $query
    }
  ) {
    errors {
      ...WebhookErrorFragment
    }
  }
}

query CheckWebhooks {
  app {
    webhooks {
      id
      targetUrl
    }
  }
}

fragment WebhookErrorFragment on WebhookError {
  message
  field
  code
}
